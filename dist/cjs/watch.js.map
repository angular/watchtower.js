{"version":3,"file":"watch.js","sources":["watch.js","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/16"],"names":[],"mappings":"AAAA;ACAI,CAAJ,EAAI,CAAA,YAAY,UAAoB,CAAC;gBCArC,CAAA,OAAO,CFEA,eAAe,CEFI;ACAtB,CAAJ,EAAI,QHIG,SAAM,MAAK,CACJ,UAAU,CAAE,CAAA,MAAM,CAAE,CAAA,UAAU,CAAE;AAC1C,CAAA,KAAI,eAAe,EAAG,CAAA,IAAI,WAAW,EAAG,KAAI,CAAC;AAC7C,CAAA,KAAI,YAAY,EAAG,WAAU,CAAC;AAC9B,CAAA,KAAI,QAAQ,EAAG,OAAM,CAAC;AACtB,CAAA,KAAI,WAAW,EAAG,WAAU,CAAC;AAC7B,CAAA,KAAI,OAAO,EAAG,CAAA,IAAI,SAAS,EAAG,MAAK,CAAC;AACpC,CAAA,KAAI,gBAAgB,EAAG,KAAI,CAAC;CGXS,AHYtC,CGZsC;ACAzC,CAAA,AAAC,eAAe,YAAY,CAAC;CJc3B,IAAI,WAAU,EAAG;CACf,SAAO,CAAA,IAAI,QAAQ,QAAQ,WAAW,CAAC;GACxC;CAED,OAAM,CAAN,UAAO,CAAE;CACP,OAAI,IAAI,SAAS,GAAI,EAAC,IAAI,OAAO;CAAE,YAAO;AAC1C,CAD0C,OACtC,OAAO,EAAG,MAAK,CAAC;AACpB,CAAA,OAAI,WAAW,CAAC,IAAI,QAAQ,aAAa,CAAE,CAAA,IAAI,QAAQ,cAAc,CAAC,CAAC;GACxE;CAED,OAAM,CAAN,UAAO,CAAE;CACP,OAAI,IAAI,SAAS;CAAE,UAAM,IAAI,MAAK,CAAC,kBAAkB,CAAC,CAAC;AACvD,CADuD,OACnD,SAAS,EAAG,KAAI,CAAC;AACjB,CAAJ,MAAI,CAAA,OAAO,EAAG,CAAA,IAAI,QAAQ,QAAQ,CAAC;AACnC,CAAA,aAAU,QAAQ,CAAC,OAAO,CAAE,KAAI,CAAC,CAAC;AAClC,CAAA,UAAO,QAAQ,EAAE,CAAC;GACnB;CAAA,KI9BmF;ACAtF,CAAA,KAAM,QAAQ;CCAd,YAAwB;CAAE,gBAAyB;GAAE;ACArD,CAAA,WAAU,CAAE,KAAI;CAAA,AFAkB,CAAC;CLgCnC","sourcesContent":["import {\n  _WatchList\n} from './linked_list';\n\nexport class Watch {\n  constructor(watchGroup, record, reactionFn) {\n    this._previousWatch = this._nextWatch = null;\n    this._watchGroup = watchGroup;\n    this._record = record;\n    this.reactionFn = reactionFn;\n    this._dirty = this._deleted = false;\n    this._nextDirtyWatch = null;\n  }\n\n  get expression() {\n    return this._record.handler.expression;\n  }\n\n  invoke() {\n    if (this._deleted || !this._dirty) return;\n    this._dirty = false;\n    this.reactionFn(this._record.currentValue, this._record.previousValue);\n  }\n\n  remove() {\n    if (this._deleted) throw new Error('Already deleted!');\n    this._deleted = true;\n    var handler = this._record.handler;\n    _WatchList._remove(handler, this);\n    handler.release();\n  }\n}\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}