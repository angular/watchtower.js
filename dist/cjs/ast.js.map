{"version":3,"file":"ast.js","sources":["ast.js","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/16"],"names":[],"mappings":"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","sourcesContent":["import {\n  WatchRecord\n} from './change_detection';\n\nimport {\n  _Handler,\n  _ConstantHandler,\n  _InvokeHandler,\n  _FieldHandler,\n  _EvalWatchRecord\n} from './watch_record';\n\nfunction _argsList(list) {\n  if (!list) list = [];\n  if (!Array.isArray(list)) return '';\n  return list.join(', ');\n}\n\nexport class AST {\n  constructor(expression) {\n    if (typeof expression !== \"string\") throw \"expression must be a string\";\n    this.expression = expression.indexOf('#.') === 0\n                    ? expression.substr(2)\n                    : expression;\n  }\n\n  setupWatch(group) {\n    throw \"setupWatch() not implemented\";\n  }\n\n  toString() {\n    return this.expression;\n  }\n}\n\nAST._CONTEXT = '#';\n\nexport class ContextReferenceAST extends AST {\n  constructor() {\n    super(AST._CONTEXT);\n  }\n\n  setupWatch(group) {\n    return new _ConstantWatchRecord(group, this.expression, group.context);\n  }\n}\n\nexport class ConstantAST extends AST {\n  constructor(constant, expression) {\n    if (arguments.length < 2) expression = null;\n    super(expression === null\n        ? (typeof constant === \"string\" ? '\"' + constant + '\"' : '' + constant)\n        : expression);\n    this.constant = constant;\n  }\n\n  setupWatch(group) {\n    return new _ConstantWatchRecord(group, this.expression, this.constant);\n  }\n}\n\nexport class FieldReadAST extends AST {\n  constructor(lhs, name) {\n    this.lhs = lhs;\n    this.name = name;\n    super(this.lhs + '.' + this.name);\n  }\n\n  setupWatch(group) {\n    return group.addFieldWatch(this.lhs, this.name, this.expression);\n  }\n}\n\nexport class PureFunctionAST extends AST {\n  constructor(name, fn, argsAST) {\n    this.fn = fn;\n    this.argsAST = argsAST;\n    this.name = name;\n    super(name + '(' + _argsList(argsAST) + ')');\n  }\n\n  setupWatch(group) {\n    return group.addFunctionWatch(this.fn, this.argsAST, this.expression);\n  }\n}\n\nexport class MethodAST extends AST {\n  constructor(lhsAST, name, argsAST) {\n    this.lhsAST = lhsAST;\n    this.name = name;\n    this.argsAST = argsAST;\n    super(lhsAST + '.' + name + '(' + _argsList(argsAST) + ')');\n  }\n\n  setupWatch(group) {\n    return group.addMethodWatch(this.lhsAST, this.name, this.argsAST, this.expression);\n  }\n}\n\nexport class CollectionAST extends AST {\n  constructor(valueAST) {\n    this.valueAST = valueAST;\n    super('#collection(' + valueAST + ')');\n  }\n\n  setupWatch(group) {\n    return group.addCollectionWatch(this.valueAST);\n  }\n}\n\nclass _ConstantWatchRecord extends WatchRecord {\n  constructor(watchGroup, expression, currentValue) {\n    this.currentValue = currentValue;\n    this.handler = new _ConstantHandler(watchGroup, expression, currentValue);\n  }\n\n  check() {\n    return false;\n  }\n\n  remove() {\n    return null;\n  }\n\n  get field() {\n    return null;\n  }\n\n  get previousValue() {\n    return null;\n  }\n\n  get object() {\n    return null;\n  }\n\n  set object(value) {\n    return null;\n  }\n\n  get nextChange() {\n    return null;\n  }\n}\n","var __moduleName = $__placeholder__0;","require($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","$traceurRuntime.superCall($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                   $__placeholder__3)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","module.exports = $__placeholder__0;","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true"]}